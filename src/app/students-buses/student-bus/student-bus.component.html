<div class="main-content">
  <div class="container-fluid">
    <div class="row ">
      <!-- <div class="col-md-12">
        <div class="card">
          <div class="card-header card-header-danger">
            <h4 class="card-title">Student & Buses</h4>
            <p class="card-category">Distribution of students on buses </p>
          </div>
          <div class="card-body">
            <div class="row">
              Write Sny things
            </div>
          </div>
        </div>
      </div> -->
    </div>

    <div class="row">
      <div class="col-md-6 school_column">
        <div class="row">
          <div class="col-md-12">
            <mat-form-field class="dropList" appearance="outline">
              <mat-label>School Name</mat-label>
              <mat-select (selectionChange)="changeSchool($event)">
                <mat-option *ngFor="let school of schools" [value]="school.id">
                  {{school.school_Name}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="col-md-12 student-list">
          <div class="mat-elevation-z4">
            <mat-progress-bar mode="indeterminate" *ngIf="isLoading">
            </mat-progress-bar>

            <table mat-table class="data-table full-width-table"
              [dataSource]="dataSource" matSort aria-label="Elements">

              <!-- Checkbox Column -->
              <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef>
                  <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()"
                    [aria-label]="checkboxLabel()">
                  </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row">
                  <mat-checkbox (click)="$event.stopPropagation()"
                    (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)"
                    [aria-label]="checkboxLabel(row)">
                  </mat-checkbox>
                </td>
              </ng-container>

              <!-- id Column -->
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
                <td mat-cell *matCellDef="let row"> {{row.id}}
                </td>
              </ng-container>
              <!-- personalImage Column -->
              <!-- <ng-container matColumnDef="personalImage">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Image</th>
                <td mat-cell *matCellDef="let row"> <img
                    style="width: 50px; height: 50px;"
                    [src]="row.personalImage" />
                </td>
              </ng-container> -->

              <!-- full_Name Column -->
              <ng-container matColumnDef="full_Name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Student
                  Name
                </th>
                <td mat-cell *matCellDef="let row">{{row.full_Name}}</td>
              </ng-container>

              <!-- phone Column -->
              <ng-container matColumnDef="bus_Name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Bus</th>
                <td mat-cell *matCellDef="let row">{{row.bus_Name}}</td>
              </ng-container>

              <!-- full_Address Column -->
              <ng-container matColumnDef="full_Address">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Address
                </th>
                <td mat-cell *matCellDef="let row">{{row.full_Address}}</td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedStudentColumns">
              </tr>
              <tr mat-row matRipple
                *matRowDef="let row; columns: displayedStudentColumns;"
                (click)="onClickedRow(row)"></tr>
            </table>

          </div>
        </div>
      </div>
      <div class="col-md-6 busCompany_column">
        <div class="row">
          <div class="col-md-12">
            <mat-form-field class="dropList" appearance="outline">
              <mat-label>BusCompany</mat-label>
              <mat-select (selectionChange)="changeBusCompany($event)">
                <mat-option *ngFor="let busCompany of busCompanies"
                  [value]="busCompany.id">
                  {{busCompany.company}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <!-- bus and busCompany column-->
          <div class="col-md-12 bus-list">
            <div class="mat-elevation-z4">
              <mat-progress-bar mode="indeterminate" *ngIf="isLoading">
              </mat-progress-bar>

              <table mat-table class="data-table full-width-table"
                [dataSource]="busDataSource" matSort aria-label="Elements">


                <!-- number Column -->
                <!-- <ng-container matColumnDef="select">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Selected
                  </th>
                  <td mat-cell *matCellDef="let row">
                    <mat-radio-group aria-labelledby="example-radio-group-label"
                      class="example-radio-group" [(ngModel)]="row.number">
                      <mat-radio-button class="example-radio-button"
                        [value]="number">

                      </mat-radio-button>
                    </mat-radio-group>
                  </td>
                </ng-container> -->

                <!-- number Column -->
                <ng-container matColumnDef="number">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>number
                  </th>
                  <td mat-cell *matCellDef="let row">{{row.number}}</td>
                </ng-container>

                <!-- capacity Column -->
                <ng-container matColumnDef="capacity">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>capacity
                  </th>
                  <td mat-cell *matCellDef="let row">{{row.capacity}}</td>
                </ng-container>

                <!-- minimum Column -->
                <ng-container matColumnDef="minimum">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>minimum
                  </th>
                  <td mat-cell *matCellDef="let row">{{row.minimum}}</td>
                </ng-container>

                <!-- large Column -->
                <ng-container matColumnDef="large">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>large
                  </th>
                  <td mat-cell *matCellDef="let row">{{row.large}}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedBustColumns">
                </tr>
                <tr mat-row matRipple
                  *matRowDef="let row; columns: displayedBustColumns;"
                  (click)="onClickedRow(row)"></tr>
              </table>

            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row buttons">
      <div class="col-md-12">
        <button mat-raised-button color="primary"
          (click)="setBulkStudentBus()">assigned Students to bus</button>
      </div>
    </div>

    <!--google Mape row-->
    <div class="row google_map">
      <div class="col-md-12">
        <agm-map mapTypeControl="satellite"
          [latitude]="school.lat ? school.lat : lat"
          [longitude]="school.lng ? school.lng : lng"
          (mapClick)="mapClicked($event)"
          [zoom]="zoom">

          <agm-marker
            [latitude]='school.lat'
            [longitude]='school.lng'
            [label]="school.school_Name"
            [iconUrl]="'school.schoolImage? schoolImage :/assets/images/empty_image.png'">
          </agm-marker>
          <agm-marker *ngFor="let m of dataSource.data; let i = index"
            (markerClick)="clickedMarker(m.label, i)" [latitude]="m.lat"
            [longitude]="m.lng" [label]="m.full_Name">

            <agm-info-window>
              <strong>InfoWindow content</strong>
            </agm-info-window>

          </agm-marker>
        </agm-map>
      </div>

      <div class='agm-map-container-inner sebm-google-map-container-inner'>
      </div>
      <div class='agm-map-content'>
        <ng-content></ng-content>
      </div>
    </div>
  </div>
</div>
